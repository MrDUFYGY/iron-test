---
import "../styles/global.css";
import Layout from '../layouts/Layout.astro';
import Nav from '../components/Nav.astro';
import Huella from '../components/ConfirmHuella.astro';

---

<Layout>

<div class=" mx-auto bg-white rounded-xl shadow-md">
    <div class="border-b-2 border-gray-200 pb-4 mb-6">
        <div class="flex justify-between items-start mb-4">
            <h1 class="text-2xl font-bold uppercase">Lista de corrección de pólizas de ingresos</h1>
            <span class="bg-blue-100 text-blue-800 font-bold px-3 py-1 rounded">HD-45</span>
        </div>
        <div class="flex justify-between items-center">
            <div class="flex items-center">
                <span class="font-semibold mr-2">Operadora:</span>
                <span class="bg-gray-100 px-3 py-1 rounded font-medium">CR 88 SAPI DE CV</span>
            </div>
            <div class="text-right">
                <span class="font-semibold">Fecha de la póliza:</span>
                <span class="ml-2">jueves, 6 de marzo de 2025</span>
            </div>
        </div>
    </div>

    <form id="formulario" class="space-y-8">
        <!-- Puntos de Amarre -->
        <div class="bg-gray-100 p-4 rounded-lg border border-gray-200">
            <h2 class="font-bold uppercase mb-4 text-gray-800">Puntos de Amarre:</h2>
            <div class="space-y-4 text-sm">
                <!-- Punto 1 con subpuntos -->
                <div>
                    <div class="flex justify-between items-center p-2 bg-gray-200 rounded-t-lg">
                        <p class="font-medium">1.- Verificar hoja de corte vs "Resumen de liquidación" por turno lo siguiente:</p>
                    </div>
                    <div class=" space-y-2 bg-white p-3 rounded-b-lg">
                        <div class="flex justify-between items-center">
                            <span class="text-gray-700">a) Litros vendidos</span>
                            <div class="flex space-x-4 mr-8">
                                <label class="inline-flex items-center">
                                    <input type="radio" name="punto1a" value="si" class="mr-1 text-blue-600"> Sí
                                </label>
                                <label class="inline-flex items-center">
                                    <input type="radio" name="punto1a" value="na" class="mr-1 text-gray-600"> N/A
                                </label>
                            </div>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-700">b) Ventas de Periféricos</span>
                            <div class="flex space-x-4 mr-8">
                                <label class="inline-flex items-center">
                                    <input type="radio" name="punto1b" value="si" class="mr-1 text-blue-600"> Sí
                                </label>
                                <label class="inline-flex items-center">
                                    <input type="radio" name="punto1b" value="na" class="mr-1 text-gray-600"> N/A
                                </label>
                            </div>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-700">c) Vales, clientes y Tarjeta Inteligente</span>
                            <div class="flex space-x-4 mr-8">
                                <label class="inline-flex items-center">
                                    <input type="radio" name="punto1c" value="si" class="mr-1 text-blue-600"> Sí
                                </label>
                                <label class="inline-flex items-center">
                                    <input type="radio" name="punto1c" value="na" class="mr-1 text-gray-600"> N/A
                                </label>
                            </div>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-700">d) Fajillas</span>
                            <div class="flex space-x-4 mr-8">
                                <label class="inline-flex items-center">
                                    <input type="radio" name="punto1d" value="si" class="mr-1 text-blue-600"> Sí
                                </label>
                                <label class="inline-flex items-center">
                                    <input type="radio" name="punto1d" value="na" class="mr-1 text-gray-600"> N/A
                                </label>
                            </div>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-700">e) Gastos</span>
                            <div class="flex space-x-4 mr-8">
                                <label class="inline-flex items-center">
                                    <input type="radio" name="punto1e" value="si" class="mr-1 text-blue-600"> Sí
                                </label>
                                <label class="inline-flex items-center">
                                    <input type="radio" name="punto1e" value="na" class="mr-1 text-gray-600"> N/A
                                </label>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Puntos 2 al 7 -->
                <div class="space-y-2">
                    <div class="flex justify-between items-center p-2 bg-gray-200 rounded-lg">
                        <span class="text-gray-700">2.- Verificar "Formas de cobro" Vs "Resumen de liquidación" del día (1/3)</span>
                        <div class="flex space-x-4">
                            <label class="inline-flex items-center">
                                <input type="radio" name="punto2" value="si" class="mr-1 text-blue-600"> Sí
                            </label>
                            <label class="inline-flex items-center">
                                <input type="radio" name="punto2" value="na" class="mr-1 text-gray-600"> N/A
                            </label>
                        </div>
                    </div>
                    <div class="flex justify-between items-center p-2 bg-gray-200 rounded-lg">
                        <span class="text-gray-700">3.- Verificar litros jarros = litros retorno (Listado de Contadores)</span>
                        <div class="flex space-x-4">
                            <label class="inline-flex items-center">
                                <input type="radio" name="punto3" value="si" class="mr-1 text-blue-600"> Sí
                            </label>
                            <label class="inline-flex items-center">
                                <input type="radio" name="punto3" value="na" class="mr-1 text-gray-600"> N/A
                            </label>
                        </div>
                    </div>
                    <!-- Punto 4 con subpuntos -->
                    <div>
                        <div class="flex justify-between items-center p-2 bg-gray-200 rounded-t-lg">
                            <p class="font-medium">4.- Verificar depósitos vs "Resumen de liquidación" (1/3)</p>
                        </div>
                        <div class="bg-white p-4 rounded-b-lg space-y-3">
                            <div class="grid grid-cols-2 gap-4">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Importe F.traslado de valores:</label>
                                    <div class="relative">
                                        <span class="absolute left-3 top-2 text-gray-500">$</span>
                                        <input type="number" id="importeTraslado" class="pl-7 w-full border border-gray-300 rounded p-2 text-sm" placeholder="0.00" step="0.01">
                                    </div>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Importe Resumen de liquidación:</label>
                                    <div class="relative">
                                        <span class="absolute left-3 top-2 text-gray-500">$</span>
                                        <input type="number" id="importeResumen" class="pl-7 w-full border border-gray-300 rounded p-2 text-sm" placeholder="0.00" step="0.01">
                                    </div>
                                </div>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Diferencia:</label>
                                <div class="relative">
                                    <span class="absolute left-3 top-2 text-gray-500">$</span>
                                    <input type="text" id="diferencia" class="pl-7 w-full border border-gray-300 rounded p-2 text-sm bg-gray-50" readonly>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="flex justify-between items-center p-2 bg-gray-200 rounded-lg">
                        <span class="text-gray-700">5.- Verificar listado de contadores por turno vs resumen de liquidación</span>
                        <div class="flex space-x-4">
                            <label class="inline-flex items-center">
                                <input type="radio" name="punto5" value="si" class="mr-1 text-blue-600"> Sí
                            </label>
                            <label class="inline-flex items-center">
                                <input type="radio" name="punto5" value="na" class="mr-1 text-gray-600"> N/A
                            </label>
                        </div>
                    </div>
                    <div class="flex justify-between items-center p-2 bg-gray-200 rounded-lg">
                        <span class="text-gray-700">6.- Verificar en "Recepción de carburantes" litros capturados, IVA Flete, vs facturas Pemex</span>
                        <div class="flex space-x-4">
                            <label class="inline-flex items-center">
                                <input type="radio" name="punto6" value="si" class="mr-1 text-blue-600"> Sí
                            </label>
                            <label class="inline-flex items-center">
                                <input type="radio" name="punto6" value="na" class="mr-1 text-gray-600"> N/A
                            </label>
                        </div>
                    </div>
                    <div class="flex justify-between items-center p-2 bg-gray-200 rounded-lg">
                        <span class="text-gray-700">7.- Verificar en "Listado Remisiones de periféricos" proveedor, claves y unidades</span>
                        <div class="flex space-x-4">
                            <label class="inline-flex items-center">
                                <input type="radio" name="punto7" value="si" class="mr-1 text-blue-600"> Sí
                            </label>
                            <label class="inline-flex items-center">
                                <input type="radio" name="punto7" value="na" class="mr-1 text-gray-600"> N/A
                            </label>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Documentos que integran la póliza -->
        <div class="bg-gray-100 p-4 rounded-lg border border-gray-200">
            <h2 class="font-bold uppercase mb-4 text-gray-800">Documentos que integran la póliza:</h2>
            <div class="space-y-2 text-sm">
                <div class="flex justify-between items-center p-2 bg-gray-200 rounded-lg">
                    <span class="text-gray-700">1.- Resumen de liquidación (1/3)</span>
                    <div class="flex space-x-4">
                        <label class="inline-flex items-center">
                            <input type="radio" name="doc1" value="si" class="mr-1 text-blue-600"> Sí
                        </label>
                        <label class="inline-flex items-center">
                            <input type="radio" name="doc1" value="na" class="mr-1 text-gray-600"> N/A
                        </label>
                    </div>
                </div>

                <div class="flex justify-between items-center p-2 bg-gray-200 rounded-lg">
                    <span class="text-gray-700">2.- Movimientos de Periféricos (1/3)</span>
                    <div class="flex space-x-4">
                        <label class="inline-flex items-center">
                            <input type="radio" name="doc2" value="si" class="mr-1 text-blue-600"> Sí
                        </label>
                        <label class="inline-flex items-center">
                            <input type="radio" name="doc2" value="na" class="mr-1 text-gray-600"> N/A
                        </label>
                    </div>
                </div>

                <div class="flex justify-between items-center p-2 bg-gray-200 rounded-lg">
                    <span class="text-gray-700">3.- Reporte "Regularización de existencias"</span>
                    <div class="flex space-x-4">
                        <label class="inline-flex items-center">
                            <input type="radio" name="doc3" value="si" class="mr-1 text-blue-600"> Sí
                        </label>
                        <label class="inline-flex items-center">
                            <input type="radio" name="doc3" value="na" class="mr-1 text-gray-600"> N/A
                        </label>
                    </div>
                </div>

                <div class="flex justify-between items-center p-2 bg-gray-200 rounded-lg">
                    <span class="text-gray-700">4.- Ficha del Banco y Traslado de valores</span>
                    <div class="flex space-x-4">
                        <label class="inline-flex items-center">
                            <input type="radio" name="doc4" value="si" class="mr-1 text-blue-600"> Sí
                        </label>
                        <label class="inline-flex items-center">
                            <input type="radio" name="doc4" value="na" class="mr-1 text-gray-600"> N/A
                        </label>
                    </div>
                </div>

                <div class="flex justify-between items-center p-2 bg-gray-200 rounded-lg">
                    <span class="text-gray-700">5.- Apuntes contables</span>
                    <div class="flex space-x-4">
                        <label class="inline-flex items-center">
                            <input type="radio" name="doc5" value="si" class="mr-1 text-blue-600"> Sí
                        </label>
                        <label class="inline-flex items-center">
                            <input type="radio" name="doc5" value="na" class="mr-1 text-gray-600"> N/A
                        </label>
                    </div>
                </div>

                <div class="flex justify-between items-center p-2 bg-gray-200 rounded-lg">
                    <span class="text-gray-700">6.- Hojas de corte de Periféricos (Turno 1,2 y 3)</span>
                    <div class="flex space-x-4">
                        <label class="inline-flex items-center">
                            <input type="radio" name="doc6" value="si" class="mr-1 text-blue-600"> Sí
                        </label>
                        <label class="inline-flex items-center">
                            <input type="radio" name="doc6" value="na" class="mr-1 text-gray-600"> N/A
                        </label>
                    </div>
                </div>

                <div class="flex justify-between items-center p-2 bg-gray-200 rounded-lg">
                    <span class="text-gray-700">7.- Comprobantes de gastos (Nómina,etc)</span>
                    <div class="flex space-x-4">
                        <label class="inline-flex items-center">
                            <input type="radio" name="doc7" value="si" class="mr-1 text-blue-600"> Sí
                        </label>
                        <label class="inline-flex items-center">
                            <input type="radio" name="doc7" value="na" class="mr-1 text-gray-600"> N/A
                        </label>
                    </div>
                </div>

                <div class="flex justify-between items-center p-2 bg-gray-200 rounded-lg">
                    <span class="text-gray-700">8.- Libro de Tanques (día15 y último mes y cuando se realicen jarros)</span>
                    <div class="flex space-x-4">
                        <label class="inline-flex items-center">
                            <input type="radio" name="doc8" value="si" class="mr-1 text-blue-600"> Sí
                        </label>
                        <label class="inline-flex items-center">
                            <input type="radio" name="doc8" value="na" class="mr-1 text-gray-600"> N/A
                        </label>
                    </div>
                </div>

                <div class="flex justify-between items-center p-2 bg-gray-200 rounded-lg">
                    <span class="text-gray-700">9.- Tira de venta real, listado de contadores, y Listado de Mediciones</span>
                    <div class="flex space-x-4">
                        <label class="inline-flex items-center">
                            <input type="radio" name="doc9" value="si" class="mr-1 text-blue-600"> Sí
                        </label>
                        <label class="inline-flex items-center">
                            <input type="radio" name="doc9" value="na" class="mr-1 text-gray-600"> N/A
                        </label>
                    </div>
                </div>

                <div class="flex justify-between items-center p-2 bg-gray-200 rounded-lg">
                    <span class="text-gray-700">10.- Hoja de corte por cambio de turno solo si se trabaja fuera del sistema</span>
                    <div class="flex space-x-4">
                        <label class="inline-flex items-center">
                            <input type="radio" name="doc10" value="si" class="mr-1 text-blue-600"> Sí
                        </label>
                        <label class="inline-flex items-center">
                            <input type="radio" name="doc10" value="na" class="mr-1 text-gray-600"> N/A
                        </label>
                    </div>
                </div>

                <div class="flex justify-between items-center p-2 bg-gray-200 rounded-lg">
                    <span class="text-gray-700">11.- Listado de remisión de periféricos con soportes</span>
                    <div class="flex space-x-4">
                        <label class="inline-flex items-center">
                            <input type="radio" name="doc11" value="si" class="mr-1 text-blue-600"> Sí
                        </label>
                        <label class="inline-flex items-center">
                            <input type="radio" name="doc11" value="na" class="mr-1 text-gray-600"> N/A
                        </label>
                    </div>
                </div>

                <div class="flex justify-between items-center p-2 bg-gray-200 rounded-lg">
                    <span class="text-gray-700">12.- Recepción de carburantes con soportes</span>
                    <div class="flex space-x-4">
                        <label class="inline-flex items-center">
                            <input type="radio" name="doc12" value="si" class="mr-1 text-blue-600"> Sí
                        </label>
                        <label class="inline-flex items-center">
                            <input type="radio" name="doc12" value="na" class="mr-1 text-gray-600"> N/A
                        </label>
                    </div>
                </div>

                <div class="flex justify-between items-center p-2 bg-gray-200 rounded-lg">
                    <span class="text-gray-700">13.- Jarreo</span>
                    <div class="flex space-x-4">
                        <label class="inline-flex items-center">
                            <input type="radio" name="doc13" value="si" class="mr-1 text-blue-600"> Sí
                        </label>
                        <label class="inline-flex items-center">
                            <input type="radio" name="doc13" value="na" class="mr-1 text-gray-600"> N/A
                        </label>
                    </div>
                </div>

                <div class="flex justify-between items-center p-2 bg-gray-200 rounded-lg">
                    <span class="text-gray-700">14.- Vales por Empresa</span>
                    <div class="flex space-x-4">
                        <label class="inline-flex items-center">
                            <input type="radio" name="doc14" value="si" class="mr-1 text-blue-600"> Sí
                        </label>
                        <label class="inline-flex items-center">
                            <input type="radio" name="doc14" value="na" class="mr-1 text-gray-600"> N/A
                        </label>
                    </div>
                </div>

                <div class="flex justify-between items-center p-2 bg-gray-200 rounded-lg">
                    <span class="text-gray-700">15.- Corte de terminales con vouchers</span>
                    <div class="flex space-x-4">
                        <label class="inline-flex items-center">
                            <input type="radio" name="doc15" value="si" class="mr-1 text-blue-600"> Sí
                        </label>
                        <label class="inline-flex items-center">
                            <input type="radio" name="doc15" value="na" class="mr-1 text-gray-600"> N/A
                        </label>
                    </div>
                </div>

                <div class="flex justify-between items-center p-2 bg-gray-200 rounded-lg">
                    <span class="text-gray-700">16.- Lista de placascon tag</span>
                    <div class="flex space-x-4">
                        <label class="inline-flex items-center">
                            <input type="radio" name="doc16" value="si" class="mr-1 text-blue-600"> Sí
                        </label>
                        <label class="inline-flex items-center">
                            <input type="radio" name="doc16" value="na" class="mr-1 text-gray-600"> N/A
                        </label>
                    </div>
                </div>
            </div>
        </div>

        <!-- Observaciones -->
        <div class="bg-gray-100 p-4 rounded-lg border border-gray-200">
            <label for="observaciones" class="block font-medium text-sm mb-2 text-gray-800">Observaciones:</label>
            <textarea id="observaciones" class="w-full border border-gray-300 rounded p-2 text-sm" rows="4" placeholder="Escriba aquí..."></textarea>
        </div>

        <!-- Firma y turno -->
        <div class="bg-gray-100 p-4 rounded-lg border border-gray-200 grid grid-cols-1 md:grid-cols-2 gap-4">
            <div>
                <label for="turno" class="block font-medium mb-2 text-gray-800">Turno:</label>
                <input id="turno" type="text" class="w-full border border-gray-300 rounded p-2">
            </div>
            <div>
                <label class="block font-medium mb-2 text-gray-800">Nombre y firma del verificador:</label>
                <input type="text" value="LUIS ALVARO VILLEGAS" disabled class="w-full bg-gray-200 border border-gray-300 rounded p-2">
            </div>
        </div>

        <!-- Botones -->
        <div class="text-center mt-6 space-x-4">
            <Huella />
            <button id="guardar" class="bg-gray-600 text-white px-8 py-3 rounded-lg hover:bg-gray-700 transition font-medium text-lg inline-block">
                Guardar
            </button>
        </div>
    </form>
</div>

    <script>
        //se crea una funcion para evitar que las otras funciones se mezclen
        function main() {
            //funcion para validar el formulario
            function validarFormulario() {
                alert("Formulario enviado correctamente.");
                return false; // Para evitar recargar por ahora
            }

            //funcion para calcular la diferencia
            function calcularDiferencia() {
                const importeTrasladoInput = document.getElementById('importeTraslado') as HTMLInputElement;
                const importeResumenInput = document.getElementById('importeResumen') as HTMLInputElement;
                const diferenciaInput = document.getElementById('diferencia') as HTMLInputElement;

                if (!importeTrasladoInput || !importeResumenInput || !diferenciaInput) return;

                const importeTraslado = parseFloat(importeTrasladoInput.value) || 0;
                const importeResumen = parseFloat(importeResumenInput.value) || 0;
                const diferencia = importeTraslado - importeResumen;
                
                diferenciaInput.value = diferencia.toFixed(2);
                
                // Cambiar color según la diferencia
                if (diferencia === 0) {
                    diferenciaInput.classList.remove('text-red-600', 'text-green-600');
                    diferenciaInput.classList.add('text-gray-600');
                } else if (diferencia > 0) {
                    diferenciaInput.classList.remove('text-red-600', 'text-gray-600');
                    diferenciaInput.classList.add('text-green-600');
                } else {
                    diferenciaInput.classList.remove('text-green-600', 'text-gray-600');
                    diferenciaInput.classList.add('text-red-600');
                }
            }

            // Agregar event listeners a los inputs
            const importeTrasladoInput = document.getElementById('importeTraslado');
            const importeResumenInput = document.getElementById('importeResumen');
        
            if (importeTrasladoInput) {
                importeTrasladoInput.addEventListener('input', calcularDiferencia);
            }
            if (importeResumenInput) {
                importeResumenInput.addEventListener('input', calcularDiferencia);
            }

            const form = document.getElementById('formulario');
            if (form) {
              form.addEventListener('submit', (event) => {
                event.preventDefault(); 
              });
            }

            const botonGuardar = document.getElementById('guardar');
            if (botonGuardar) {
                botonGuardar.addEventListener('click', validarFormulario);
            }
        }
        
        // Ejecuta la función principal cuando la página se haya cargado
        window.addEventListener('load', main);
    </script>

</Layout>
